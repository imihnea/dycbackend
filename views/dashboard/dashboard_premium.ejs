<% include ../partials/header %>
<link rel="stylesheet" type="text/css" media="screen" href="../../dist/css/dashboard.css" />
<link rel="stylesheet" href="../../dist/css/products.css">
<link rel="stylesheet" href="../../dist/css/bulma-pricingtable.min.css">
<link rel="stylesheet" type="text/css" href="../../dist/css/Chart.min.css">
<div class="columns" style="overflow: hidden; margin: auto;">
    <% include ../partials/sidebar %>

    <div class="column dashboard-right smallerCenter" >
        <div class="container is-fluid">
            <% if(errors){ %>
                <div class="notification is-danger" role="alert"> 
                <% errors.forEach(function( err){ %>
                    <%= err.msg %><br>
                <% }) %>
                </div>
            <% } %>
        </div>
        <div class="columns">
            <div class="column"></div>
            <div class="column is-three-fifths">
                <div class="dashTop column">
                    <h2 class="title">Premium</h2>
                </div>
                <br>
                <% if (premium) { %>
                    <div class="frame smallerCenter">
                        <div class="tabs is-centered is-boxed">
                            <ul>
                                <li class="tabTrigger is-active" id="categoryPopularityTrigger"><a class="link">Category popularity</a></li>
                                <li class="tabTrigger" id="productPopularityTrigger"><a class="link">Product popularity</a></li>
                            </ul>
                        </div>
                        <div class="analytics">
                            <p class="title is-5">Category popularity is determined by the number of searches where the user selected to look into that category</p>
                            <div class="select cont-select catSelectLeft premiumSelect">
                                <select type="text" name="firstCategory" id="firstCategory" style="width: 100%;" required>
                                    <option disabled selected>Main Category</option>
                                    <option value="all">All Categories</option>
                                    <option value="Collectibles & Art">Collectibles & Art</option>
                                    <option value="Electronics">Electronics</option>
                                    <option value="Fashion & Beauty">Fashion & Beauty</option>
                                    <option value="Home Improvement">Home Improvement</option>
                                    <option value="Leisure Time">Leisure Time</option>
                                    <option value="Mothers & Babies">Mothers & Babies</option>
                                    <option value="Pet Supplies">Pet Supplies</option>
                                    <option value="Real Estate">Real Estate</option>
                                    <option value="Sports & Outdoors">Sports & Outdoors</option>
                                    <option value="Vehicles">Vehicles</option>
                                </select>
                            </div>
                            <div class="select cont-select catSelectLeft premiumSelect">
                                <select type="text" name="timeFrame" id="timeframe" style="width: 100%;" required>
                                    <option disabled selected>Time Frame</option>
                                    <option value="7">7 days</option>
                                    <option value="14">14 days</option>
                                    <option value="30">One month</option>
                                    <option value="90">3 months</option>
                                    <option value="All">All-time</option>
                                </select>
                            </div>
                            <input type="hidden" name="_csrf" id="csrfToken" value="<%= csrfToken %>">
                            <input type="hidden" name="csrfSecret" id="csrfSecret" value="<%= csrfSecret %>">
                            <br>
                            <button class="button is-primary" id="searchCateg" style="margin: auto;">Search</button>
                            <div id="canvasContainer">
                                <canvas id="categChart" class="hide" width="400" height="200" style="width: 90%; margin-top: 2vh; padding-left: 2vw; padding-right: 2vw;"></canvas>
                            </div>
                        </div>
                        <div class="analytics hide">
                            <p class="title is-5 smallerCenter">Look for the times your products were viewed and how many you've sold so far</p>
                            <div class="select cont-select catSelectLeft premiumSelect">
                                <select type="text" name="firstCategory" id="firstCategoryProd" style="width: 100%;" required>
                                    <option disabled selected>Main Category</option>
                                    <option value="all">All Categories</option>
                                    <option value="Collectibles & Art">Collectibles & Art</option>
                                    <option value="Electronics">Electronics</option>
                                    <option value="Fashion & Beauty">Fashion & Beauty</option>
                                    <option value="Home Improvement">Home Improvement</option>
                                    <option value="Leisure Time">Leisure Time</option>
                                    <option value="Mothers & Babies">Mothers & Babies</option>
                                    <option value="Pet Supplies">Pet Supplies</option>
                                    <option value="Real Estate">Real Estate</option>
                                    <option value="Sports & Outdoors">Sports & Outdoors</option>
                                    <option value="Vehicles">Vehicles</option>
                                </select>
                            </div>
                            <div class="select cont-select catSelectLeft premiumSelect">
                                <select type="text" name="timeFrame" id="timeframeProd" style="width: 100%;" required>
                                    <option disabled selected>Time Frame</option>
                                    <option value="7">7 days</option>
                                    <option value="14">14 days</option>
                                    <option value="30">One month</option>
                                    <option value="90">3 months</option>
                                    <option value="All">All-time</option>
                                </select>
                            </div>
                            <br>
                            <button class="button is-primary" id="searchProd" style="margin: auto;">Search</button>
                            <p class="title is-5 hide" id="prodText" style="margin-top: 2vh;">Product views</p>
                            <div id="prodCanvasContainer">
                                <canvas id="prodChart" class="hide" width="400" height="200" style="width: 90%; margin-top: 2vh; padding-left: 2vw; padding-right: 2vw;"></canvas>
                            </div>
                            <p class="title is-5 hide" id="prodSoldText" style="margin-top: 2vh;">Products sold</p>
                            <div id="prodSoldCanvasContainer">
                                <canvas id="prodSoldChart" class="hide" width="400" height="200" style="width: 90%; margin-top: 2vh; padding-left: 2vw; padding-right: 2vw;"></canvas>
                            </div>
                        </div>
                    </div>
                <% } else { %>
                    <div class="column frame smallerCenter">
                        <div class="column">
                          <h1 class="title">Premium Membership</h2>
                        </div>
                        <br>
                        <div class="field">
                          <figure class="image is-128x128" style="margin: auto;">
                            <img src="<%= user.avatar.url %>" class="profilepic" alt=""/>
                          </figure>
                        </div>
                        <div class="field">
                            <h2 class="title">Benefits</h2>
                        </div>
                        <div class="field">
                            <p class="control has-icons-left">
                                <input class="input" value="Golden border profile picture" required readonly autofocus/>
                                <span class="icon is-small is-left">
                                    <i class="fas fa-check-square"></i>
                                </span>
                            </p>
                        </div>
                        <div class="field">
                            <p class="control has-icons-left">
                                <input class="input" value="Seller fee reduced to 10% per product (from 15%)" required readonly/>
                                <span class="icon is-small is-left">
                                    <i class="fas fa-check-square"></i>
                                </span>
                            </p>
                        </div>
                        <div class="field">
                            <p class="control has-icons-left">
                                <input class="input" value="Five free tokens per month" required readonly/>
                                <span class="icon is-small is-left">
                                    <i class="fas fa-check-square"></i>
                                </span>
                            </p>
                        </div>
                        <div class="field">
                            <p class="control has-icons-left">
                                <input class="input" value="Priority customer support" required readonly/>
                                <span class="icon is-small is-left">
                                    <i class="fas fa-check-square"></i>
                                </span>
                            </p>
                        </div>
                        <div class="field">
                            <p class="control has-icons-left">
                                <input class="input" value="Special notifications page with charts and analytics" required readonly/>
                                <span class="icon is-small is-left">
                                    <i class="fas fa-check-square"></i>
                                </span>
                            </p>
                        </div>
                        <div class="pricing-table is-comparative" style="padding-right:2vw;">
                          <div class="pricing-plan is-features">
                            <div class="plan-header">Membership Packs</div>
                            <div class="plan-price"><span class="plan-price-amount">&nbsp;</span></div>
                            <div class="plan-items">
                              <div class="plan-item">USD Equivalent</div>
                              <div class="plan-item">Months</div>
                              <div class="plan-item">Tokens</div>
                              <div class="plan-item">(%) Saved</div>
                            </div>
                            <div class="plan-footer"></div>
                          </div>
                          <div class="pricing-plan">
                            <div class="plan-header">Basic</div>
                            <div class="plan-price"><span class="plan-price-amount"><span class="plan-price-currency">BTC</span><%= (tokenprice*19.99).toFixed(5) %></span></div>
                            <div class="plan-items">
                              <div class="plan-item" data-feature="USD Equivalent">$19.99 USD</div>
                              <div class="plan-item" data-feature="Months">1</div>
                              <div class="plan-item" data-feature="Tokens">5</div>
                              <div class="plan-item" data-feature="(%) Saved">-</div>
                            </div>
                            <div class="plan-footer">
                              <form action="/dashboard/<%= user._id %>/subscription" method="POST">
                                  <input type="hidden" name="days" value="30" />
                                  <input type="hidden" name="subscriptionCost" value="<%= (tokenprice*19.99).toFixed(5) %>" />
                                  <button class="button is-fullwidth">Choose</button>
                              </form>
                            </div>
                          </div>
                          <div class="pricing-plan is-warning">
                            <div class="plan-header">Enthusiast</div>
                            <div class="plan-price"><span class="plan-price-amount"><span class="plan-price-currency">BTC</span><%= (tokenprice*56.99).toFixed(5) %></span></div>
                            <div class="plan-items">
                              <div class="plan-item" data-feature="USD Equivalent">$56.99 USD</div>
                              <div class="plan-item" data-feature="Months">3</div>
                              <div class="plan-item" data-feature="Tokens">15</div>
                              <div class="plan-item" data-feature="(%) Saved">5%</div>
                            </div>
                            <div class="plan-footer">
                              <form action="/dashboard/<%= user._id %>/subscription" method="POST">
                                  <input type="hidden" name="days" value="90" />
                                  <input type="hidden" name="subscriptionCost" value="<%= (tokenprice*56.99).toFixed(5) %>" />
                                  <button class="button is-fullwidth">Choose</button>
                              </form>
                            </div>
                          </div>
                          <div class="pricing-plan is-active">
                            <div class="plan-header">Visionary</div>
                            <div class="plan-price"><span class="plan-price-amount"><span class="plan-price-currency">BTC</span><%= (tokenprice*107.99).toFixed(5) %></span></div>
                            <div class="plan-items">
                              <div class="plan-item" data-feature="USD Equivalent">$107.99 USD</div>
                              <div class="plan-item" data-feature="Months">6</div>
                              <div class="plan-item" data-feature="Tokens">30</div>
                              <div class="plan-item" data-feature="(%) Saved">10%</div>
                            </div>
                            <div class="plan-footer">
                              <form action="/dashboard/<%= user._id %>/subscription" method="POST">
                                  <input type="hidden" name="days" value="180" />
                                  <input type="hidden" name="subscriptionCost" value="<%= (tokenprice*107.99).toFixed(5) %>" />
                                  <button class="button is-fullwidth">Choose</button>
                              </form>
                            </div>
                          </div>
                          <div class="pricing-plan is-danger">
                            <div class="plan-header">Enterprise</div>
                            <div class="plan-price"><span class="plan-price-amount"><span class="plan-price-currency">BTC</span><%= (tokenprice*203.99).toFixed(5) %></span></div>
                            <div class="plan-items">
                              <div class="plan-item" data-feature="USD Equivalent">$203.99 USD</div>
                              <div class="plan-item" data-feature="Months">12</div>
                              <div class="plan-item" data-feature="Tokens">60</div>
                              <div class="plan-item" data-feature="(%) Saved">15%</div>
                            </div>
                            <div class="plan-footer">
                              <form action="/dashboard/<%= user._id %>/subscription" method="POST">
                                  <input type="hidden" name="days" value="360" />
                                  <input type="hidden" name="subscriptionCost" value="<%= (tokenprice*203.99).toFixed(5) %>" />
                                  <button class="button is-fullwidth">Choose</button>
                              </form>
                            </div>
                          </div>
                        </div>
                      </div>  
                <% } %>
            </div>
            <div class="column"></div>
        </div>

    </div>
</div>

<% include ../partials/footer %>
<script src="../../dist/js/dashboard_premium.js"></script>
<script src="../../dist/js/Chart.min.js"></script>