<% include ../partials/header %>
<link rel="stylesheet" type="text/css" media="screen" href="/dist/css/dashboard.css" />
<div class="columns wrapper">
    <% include ../partials/sidebar %>

    <div class="column dashboard-right">
        <div class="dashTop column">
            <h1 class="title">Notifications</h1>
        </div>
        <div class="halfPad">
            <br>
        </div>
        <br>
        <div>
            <% if (notifications.docs.length === 0) { %>
                <p class="title">You do not have any notifications yet.</p>
            <% } else { %>
                <div>
                    <div class="pagination paginationT">
                        <% include ../partials/paginateNotifications %>
                    </div>
                </div>
            <% } %>
            <% let time; %>
            <div class="column is-four-fifths" style="margin: auto;">
                <% notifications.docs.forEach(notification => { %>
                    <div class="columns notif" <% if (!notification.read) { %> style="background-color: #3269cac4;" <% } else { %> style="background-color: #3269ca78;" <% } %> >
                        <div style="position: absolute; width: 100%; height: 100%;">
                            <a href="<%= notification.linkTo %>">
                                <button class="notifBtn">
                                    <span class="notifSpan"></span>
                                </button>
                            </a>
                        </div>
                        <div class="column is-one-fifth">
                            <img src="<%= notification.imgLink %>" style="width: 36px; height: 36px;" alt="">
                        </div>
                        <div class="column">
                            <p style="text-align: left;"><%= notification.message %></p>
                            <span style="display: flex; align-items: center;">
                                <i class="far fa-clock" style="margin-right: 0.5vw;"></i>
                                <p style="text-align: left;">
                                    <% time = Math.floor((Date.now() - notification.createdAt)/1000/60/60) %>
                                    <% if (time >= 1) { %> <%= time %> Hr <% } else { %> Just now <% } %>
                                </p>
                            </span>
                        </div>
                    </div>
                <% }); %>
            </div>
            <br>
            <% if (notifications.docs.length === 0) { %>
            <% } else { %>
                <div>
                    <div class="pagination paginationT">
                        <% include ../partials/paginateNotifications %>
                    </div>
                </div>
            <% } %>
        </div>
    </div>

</div>
<% include ../partials/footer %>
<script src="../../dist/js/dashboard_products.js"></script>