<% include partials/header %>

<link rel="stylesheet" href="../dist/css/index.css">  
<link rel="stylesheet" href="../dist/css/slideshow.css">

<div id="slider">
    <div class="slides">
        <div class="slider">
        <div class="legend"></div>
        <div class="image">
            <form action="/secondCategSearch" method="POST">
                <input type="text" name="searchName" value="" hidden>
                <input type="text" name="searchCateg" value="Collectibles & Art" hidden>
                <input type="text" name="category" value="Collectibles" hidden>
                <button class="sliderBtn"><div class="slider-image"><img src="https://res.cloudinary.com/dxbujmytn/image/upload/v1545483374/collection.png" ></div></button>
            </form>
        </div>
        </div>
        <div class="slider">
            <div class="legend"></div>
            <div class="image">
                <form action="/secondCategSearch" method="POST">
                    <input type="text" name="searchName" value="" hidden>
                    <input type="text" name="searchCateg" value="Leisure Time" hidden>
                    <input type="text" name="category" value="Music" hidden>
                    <button class="sliderBtn"><div class="slider-image"><img src="https://res.cloudinary.com/dxbujmytn/image/upload/v1545483375/music.png" ></div></button>
                </form>
            </div>
        </div>
        <div class="slider">
            <div class="legend"></div>
            <div class="image">
                <form action="/secondCategSearch" method="POST">
                    <input type="text" name="searchName" value="" hidden>
                    <input type="text" name="searchCateg" value="Sports & Outdoors" hidden>
                    <input type="text" name="category" value="Sports & Fitness" hidden>
                    <button class="sliderBtn"><div class="slider-image"><img src="https://res.cloudinary.com/dxbujmytn/image/upload/v1545483371/sport.png" ></div></button>
                </form>
            </div>
        </div>
    </div>
    <div class="switch">
        <ul>
            <li>
            <div class="on"></div>
            </li>
            <li></li>
            <li></li>
        </ul>
        </div>
</div>

<div class="container is-fluid">
    <% if(errors){ %>
        <div class="notification is-danger" role="alert"> 
        <% errors.forEach(function( err){ %>
            <%= err.msg %><br>
        <% }) %>
        </div>
    <% } %>
</div>

<div class="hero-body hero-content">
    <% if (products.total > 20) { %>
        <div style="display: flex; justify-content: center; margin-bottom: 2vh;">
            <% include ./partials/paginateIndex %>
        </div>
    <% } %>
    
    <div class="container columns" style="flex-wrap: wrap; justify-content: space-evenly; width: 50vw;"> 
    <% if (products.total != 0) { %>
        <% products.docs.forEach((product) => { %>
            <div class="column card feat_card frame" style="flex-grow: 0;">
                <a href="/products/<%= product._id %>/view">
                    <span style="width: 83px; height: 84px; left: 0; bottom: 0; top: 0; z-index: 2; position: absolute;
                    background: url('../dist/img/featured.png') no-repeat;"></span>
                    <div class="card-image">
                        <figure class="image featimg">
                            <img src="<%= product.images[0].url %>" class="featimgs">
                        </figure>
                    </div>
                    <div class="card-content">
                        <div class="media">
                            <div class="media-content">
                                <p class="title is-5" style="overflow: hidden;"><%= product.name %> </p>
                            </div>
                        </div>
                        <div class="accepted_currencies frame">
                                <p class="curr_text" id="btc_curr"><%= product.btcPrice %></p>
                                <span class="curr_img"><img src="../../dist/img/bitcoin.png" alt="Bitcoin"></span>
                        </div>
                    </div> 
                </a>      
            </div>
        <% }); %>
    <% } %>
    <% if (fillProducts.length > 0) { %>
        <% fillProducts.forEach((fillProduct) => { %>
            <div class="column card feat_card frame" style="flex-grow: 0;">
                <a href="/products/<%= fillProduct._id %>/view">
                    <span style="width: 83px; height: 84px; left: 0; bottom: 0; top: 0; z-index: 2; position: absolute;
                    background: url('../dist/img/featured.png') no-repeat;"></span>
                    <div class="card-image">
                        <figure class="image featimg">
                            <img src="<%= fillProduct.images[0].url %>" class="featimgs">
                        </figure>
                    </div>
                    <div class="card-content">
                        <div class="media">
                            <div class="media-content">
                                <p class="title is-5" style="overflow: hidden;"><%= fillProduct.name %> </p>
                            </div>
                        </div>
                        <div class="accepted_currencies frame">
                            <p class="curr_text" id="btc_curr"><%= fillProduct.btcPrice %></p>
                            <span class="curr_img"><img src="../../dist/img/bitcoin.png" alt="Bitcoin"></span>
                        </div>
                    </div> 
                </a>      
            </div>
        <% }); %>
    <% } %>
    </div>
    <% if (products.total > 20) { %>
        <div style="display: flex; justify-content: center; margin-bottom: 2vh;">
            <% include ./partials/paginateIndex %>
        </div>
    <% } %>
</div>

<% include partials/footer %>
<script src="../dist/js/index.js"></script>